<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PoleÄ‡ BrydÅ¼a!</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a2d02d6e7a.js" crossorigin="anonymous"></script>
</head>
<body>
  <div class="container">
    <h1>PoleÄ‡ BrydÅ¼a znajomym!</h1>
    <p id="msg"></p>
    <div class="buttons">
      <button id="shareBtn" class="btn" aria-label="UdostÄ™pnij systemowo">
        <i class="fas fa-share-alt"></i> UdostÄ™pnij
      </button>
      <a id="waBtn" class="btn whatsapp" href="#" target="_blank" rel="noopener">
        <i class="fab fa-whatsapp"></i> WhatsApp
      </a>
      <a id="msgrBtn" class="btn messenger" href="https://m.me/" target="_blank" rel="noopener">
        <i class="fab fa-facebook-messenger"></i> Messenger
      </a>
      <a id="smsBtn" class="btn sms" href="#">
        <i class="fas fa-sms"></i> SMS
      </a>
      <a id="emailBtn" class="btn email" href="#" target="_blank" rel="noopener">
        <i class="fas fa-envelope"></i> Email
      </a>
      <button id="copyBtn" class="btn copy">
        <i class="fas fa-copy"></i> Kopiuj wiadomoÅ›Ä‡
      </button>
    </div>
    <footer id="footnote"></footer>
  </div>
  <script>
    (function () {
      const params = new URLSearchParams(window.location.search);
      const refParam = params.get('ref') || '';
      const instructorName = refParam ? decodeURIComponent(refParam.replace(/_/g, ' ')) : 'naszego instruktora';

      const message = `Hej! Ostatnio chodziÅ‚am na zajÄ™cia z BrydÅ¼a prowadzonych przez ${instructorName}. Bardzo mi siÄ™ podobaÅ‚y ðŸ˜Š\nChciaÅ‚abym Ci je poleciÄ‡! Pierwszy miesiÄ…c masz za darmo, jeÅ›li powiesz, Å¼e jesteÅ› z mojego polecenia ðŸ’¬`;

      document.getElementById('msg').textContent = message;

      const encodedMsg = encodeURIComponent(message);

      document.getElementById('waBtn').href = `https://wa.me/?text=${encodedMsg}`;
      document.getElementById('smsBtn').href = `sms:?&body=${encodedMsg}`;
      document.getElementById('emailBtn').href = `mailto:?subject=Polecenie%20zaj%C4%99%C4%87%20Bryd%C5%BCa&body=${encodedMsg}`;

      const shareBtn = document.getElementById('shareBtn');
      if (navigator.share) {
        shareBtn.addEventListener('click', async () => {
          try {
            await navigator.share({ text: message });
          } catch (err) {
            console.error('UdostÄ™pnianie anulowane lub niedostÄ™pne', err);
          }
        });
      } else {
        shareBtn.style.display = 'none';
      }

      document.getElementById('copyBtn').addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(message);
          alert('WiadomoÅ›Ä‡ skopiowana do schowka!');
        } catch (err) {
          alert('Nie udaÅ‚o siÄ™ skopiowaÄ‡ wiadomoÅ›ci.');
        }
      });

      if (refParam) {
        document.getElementById('footnote').textContent = `Kod polecenia instruktora: ${instructorName}`;
      }
    })();
  </script>
</body>
</html>
